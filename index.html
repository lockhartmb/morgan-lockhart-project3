<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>You think you know The Office?</title>
    <link rel="shortcut icon" href="assets/mug-favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans:600|Roboto" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>

    <!-- I didn't include a skip link because there is no nav to this game to skip past and I wouldn't want them to skip past the header that gives the context for the quiz -->

    <header>
        <div class="wrapper">
            <h1>World's <span>best</span><span>The Office</span> trivia game</h1>
            <a href="#question1" class="take-quiz">Take the quiz!</a>
        </div>
    </header>

    <main>
        <div class="wrapper">

            <!-- Each question is a form with four radio buttons and a submit button -->
            <!-- Question 1 -->
            <form action="" method="POST" name="question1" id="question1" class="question visible">
                
                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/dwight.jpeg" alt="Dwight Schrute">
                </div>

                <p>How long does it take Dwight to skin a mule deer?</p>

                <!-- Answer options -->
                <div class="options">
                    <input type="radio" id="response1-1" name="question1" value="0">
                    <label for="response1-1">3.5 minutes</label>

                    <input type="radio" id="response1-2" name="question1" value="0">
                    <label for="response1-2">18 minutes</label>

                    <input type="radio" id="response1-3" name="question1" value="1">
                    <label for="response1-3">Less than 10 minutes</label>

                    <input type="radio" id="response1-4" name="question1" value="0">
                    <label for="response1-4">Around half an hour</label>
                </div>

                <!-- This is where the error message will be displayed if the user does not select an option -->
                <div class="error"></div>

                <!-- Submit button -->
                <div class="submit-container">
                    <input type="submit" value="Next question" class="question1" data-place="#question2">
                </div>

            </form> <!-- End of question 1 -->

            <!-- Quesiton 2 -->
            <form action="" method="POST" name="question2" id="question2" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/mose.jpg" alt="Mose Schrute">
                </div>

                <p>What are the consequences when a Schrute boy does not learn his rules?</p>

                <div class="options">
                    <input type="radio" id="response2-1" name="question2" value="0">
                    <label for="response2-1">He does Michael's laundry for a month</label>

                    <input type="radio" id="response2-2" name="question2" value="1">
                    <label for="response2-2">He is eaten in his sleep</label>

                    <input type="radio" id="response2-3" name="question2" value="0">
                    <label for="response2-3">He is whipped by the Belschnickel</label>

                    <input type="radio" id="response2-4" name="question2" value="0">
                    <label for="response2-4">He is eaten by a wolf</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question2" data-place="#question3">
                </div>

            </form>

            <!-- Question 3 -->
            <form action="" method="POST" name="question3" id="question3" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/pam.jpg" alt="Pam Beesly">
                </div>

                <p>What is Pam's middle name?</p>

                <div class="options">
                    <input type="radio" id="response3-1" name="question3" value="0">
                    <label for="response3-1">Jenny</label>

                    <input type="radio" id="response3-2" name="question3" value="0">
                    <label for="response3-2">Zoe</label>

                    <input type="radio" id="response3-3" name="question3" value="0">
                    <label for="response3-3">Marie</label>

                    <input type="radio" id="response3-4" name="question3" value="1">
                    <label for="response3-4">Morgan</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question3" data-place="#question4">
                </div>

            </form>

            <!-- Question 4 -->
            <form action="" method="POST" name="question4" id="question4" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/kevin.jpeg" alt="Kevin Malone">
                </div>

                <p>Kevin describes himself as a "textbook _____"</p>

                <div class="options">
                    <input type="radio" id="response4-1" name="question4" value="1">
                    <label for="response4-1">over-thinker</label>

                    <input type="radio" id="response4-2" name="question4" value="0">
                    <label for="response4-2">over-achiever</label>

                    <input type="radio" id="response4-3" name="question4" value="0">
                    <label for="response4-3">over-eater</label>

                    <input type="radio" id="response4-4" name="question4" value="0">
                    <label for="response4-4">over-doer</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question4" data-place="#question5">
                </div>

            </form>

            <!-- Question 5 -->
            <form action="" method="POST" name="question5" id="question5" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/oscar.jpg" alt="Oscar Martinez">
                </div>

                <p>What costume wins Oscar the Halloween costume contest?</p>

                <div class="options">
                    <input type="radio" id="response5-1" name="question5" value="0">
                    <label for="response5-1">Gordon Gecko</label>

                    <input type="radio" id="response5-2" name="question5" value="1">
                    <label for="response5-2">A rational consumer</label>

                    <input type="radio" id="response5-3" name="question5" value="0">
                    <label for="response5-3">Recyclops</label>

                    <input type="radio" id="response5-4" name="question5" value="0">
                    <label for="response5-4">Santa</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question5" data-place="#question6">
                </div>

            </form>

            <!-- Question 6 -->
            <form action="" method="POST" name="question6" id="question6" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/meredith.jpg" alt="Meredith Palmer">
                </div>

                <p>At the Christmas party, Meredith is adamant that she is not an alcholic. What does she admit to being addicted to?</p>

                <div class="options">
                    <input type="radio" id="response6-1" name="question6" value="0">
                    <label for="response6-1">Cigarettes</label>

                    <input type="radio" id="response6-2" name="question6" value="0">
                    <label for="response6-2">Head-banging</label>

                    <input type="radio" id="response6-3" name="question6" value="0">
                    <label for="response6-3">Outback Steakhouse</label>

                    <input type="radio" id="response6-4" name="question6" value="1">
                    <label for="response6-4">Porn</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question6" data-place="#question7">
                </div>

            </form>

            <!-- Question 7 -->
            <form action="" method="POST" name="question7" id="question7" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/creed.jpg" alt="Creed Bratton">
                </div>

                <p>Which place makes the best pizza?</p>

                <div class="options">
                    <input type="radio" id="response7-1" name="question7" value="1">
                    <label for="response7-1">Alfredo's Pizza Cafe</label>

                    <input type="radio" id="response7-2" name="question7" value="0">
                    <label for="response7-2">Pizza by Alfredo</label>

                    <input type="radio" id="response7-3" name="question7" value="0">
                    <label for="response7-3">Alfredo's Pizza Bistro</label>

                    <input type="radio" id="response7-4" name="question7" value="0">
                    <label for="response7-4">Pizza by Alejandro</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question7" data-place="#question8">
                </div>

            </form>

            <!-- Quesiton 8 -->
            <form action="" method="POST" name="question8" id="question8" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/michael.png" alt="Michael Scott">
                </div>

                <p>Sandals Jamaica boasts Jamaica's largest what?</p>

                <div class="options">
                    <input type="radio" id="response8-1" name="question8" value="0">
                    <label for="response8-1">Rockclimbing wall</label>

                    <input type="radio" id="response8-2" name="question8" value="0">
                    <label for="response8-2">Miniput course</label>

                    <input type="radio" id="response8-3" name="question8" value="1">
                    <label for="response8-3">Freshwater pool</label>

                    <input type="radio" id="response8-4" name="question8" value="0">
                    <label for="response8-4">Waterslide</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question8" data-place="#question9">
                </div>

            </form>

            <!-- Question 9 -->
            <form action="" method="POST" name="question9" id="question9" class="question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/prison-mike.jpg" alt="Prison Mike">
                </div>

                <p>Prison Mike claims that in prison, they were guarded by what?</p>

                <div class="options">
                    <input type="radio" id="response9-1" name="question9" value="0">
                    <label for="response9-1">Thestrals</label>

                    <input type="radio" id="response9-2" name="question9" value="1">
                    <label for="response9-2">Dementors</label>

                    <input type="radio" id="response9-3" name="question9" value="0">
                    <label for="response9-3">Death eaters</label>

                    <input type="radio" id="response9-4" name="question9" value="0">
                    <label for="response9-4">Voldemort</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question9" data-place="#question10">
                </div>

            </form>

            <!-- Question 10 -->
            <form action="" method="POST" name="question10" id="question10" class="last-question">

                <div data-aos="zoom-in-up">
                    <img class="character" src="assets/andy.jpg" alt="Andy Bernard">
                </div>

                <p>Who is the worst regional manager Dunder Mifflin has ever seen?</p>

                <div class="options">
                    <input type="radio" id="response10-1" name="question10" value="1">
                    <label for="response10-1">D'Angelo Vickers</label>

                    <input type="radio" id="response10-2" name="question10" value="1">
                    <label for="response10-2">Nelly</label>

                    <input type="radio" id="response10-3" name="question10" value="1">
                    <label for="response10-3">Andy</label>

                    <input type="radio" id="response10-4" name="question10" value="1">
                    <label for="response10-4">Robert California</label>
                </div>

                <div class="error"></div>

                <div class="submit-container">
                    <input type="submit" value="Next question" class="question10" data-place="#results">
                </div>

            </form>

            <!-- This section is dynamically populated with the user's score and a statement about how well they did -->
            <section class="results" id="results">
                <div class="inside-results"><!--This is where the user's results will be displayed--></div>
            </section>

        </div> <!-- .../wrapper -->
    </main>

    <footer>
        <p>Content from The Office. Built by Morgan Lockhart, 2019</p>
    </footer>

    <!-- Script tag for jQuery library -->
    <script src='https://code.jquery.com/jquery-3.2.1.min.js'
        integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=' crossorigin='anonymous'></script>

    <!-- Script tag for Animate on Scroll library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <!-- Script tag for all custom JavaScrpt/jQuery that I wrote -->
    <script>

        // creating an empty object to contain all information pertaining to the game
        let myGame = {};

        // creating an empty answers object to contain the user's answer to each question, this way they can be overwritten if the user goes back and changes their answer to a question in the middle of the quiz
        myGame.answersObject = {};

        // creating an empty array that will be filled at the end of the quiz with the value for each property in the answers object
        myGame.answersArray = [];

        // creating a function that logs the user's chosen answer, displays an error message if they don't select an answer, and also presents their result at the end
        myGame.getAnswers = () => {

            // ".question" is the class for the first 9 questions (form elements). when a user submits the question/form, start by preventing the default action of refreshing the page
            $('.question').on('submit', function (event) {
                event.preventDefault();

                // go inside the form, find the checked input, and record it's value
                let theAnswer = $(this).find('input:checked').val();

                // go inside hte form, find the checked input, and record value of the name attribute
                let theKey = [$(this).find('input:checked').attr('name')];

                // if the user made a selection, then...
                if (theAnswer) {

                    // take the value of their selection along with the value of the name attribute and put them in the answers object. by doing this, if they go back and change an answer later, it will overwrite this value
                    myGame.answersObject[theKey] = theAnswer;

                    // once answer is logged, scroll down to the next question using the data-place attribute to define the target
                    let button = $(this).find('[type=submit]');
                    let target = button.data("place");
                    $('html, body').animate(
                        { scrollTop: $(target).offset().top },
                        'slow',
                        'swing',
                        function () {}
                    );

                    // to further avoid a user being able to skip a question without answering, all questions are invisible until they hit "next question", at which point the class of "visible" is applied to the next question
                    $(this).next('form').addClass('visible');

                    // if the user does not make a selection, give them an error that says they have to make a selection
                } else {
                    let selectError = `Please pick one of these options!`;
                    $(this).find('.error').html(`<p>${selectError}</p>`);
                }
            });

            // the tenth question is treated a bit differently so it has a novel class of ".last-question". it will do all the same things as above but clicking it will also present the user's results
            $('.last-question').on('submit', function (event) {
                event.preventDefault();

                let lastAnswer = $(this).find('input:checked').val();
                let lastKey = [$(this).find('input:checked').attr('name')];

                if (lastAnswer) {

                    myGame.answersObject[lastKey] = lastAnswer;

                    let button = $(this).find('[type=submit]');
                    let target = button.data("place");
                    $('html, body').animate(
                        { scrollTop: $(target).offset().top },
                        'slow',
                        'swing',
                        function () {}
                    );

                } else {
                    let selectError = `Please pick one of these options!`;
                    $('.error').html(`<p>${selectError}</p>`);
                }

                // once all 10 answers have been logged to the answers object, use the object values function to take the value of every key value pair, convert it to a number, and place it in the answers array
                myGame.answersArray = Object.values(myGame.answersObject).map(Number);

                // use the reduce function to add all 10 values in the array and return that value
                let results = myGame.answersArray.reduce((accumulator, currentValue) => {
                    return accumulator + currentValue;
                });

                // use that results value to display the user's result on the screen 
                let score = `<p>You scored ${results} out of 10.</p>`;

                // depending on how well they scored, present a different statement/image combo
                // this first scenario shouldn't actually happen now that I've rewritten how results are stored, but I left it there just in case
                if (results > 10) {
                    $('.inside-results').html(`<p>Sorry, something went wrong. Refresh the page and take the quiz again.</p>`);
                } else if (results === 10) {
                    $('.inside-results').html(`${score}
                    <p>Mount this Trivia Genius Dundie upon your mantel with pride!</p>
                    <img src="assets/dundie-award.webp" alt="Michael Scott presenting a Dundie Award trophy">`);
                } else if (results === 8 || results === 9) {
                    $('.inside-results').html(`${score}
                    <p>Congrats, you're one of the smartest in the office!</p>
                    <img src="assets/oscar-dance.gif" alt="Oscar Martinez dancing and saying YOLO">`);
                } else if (results === 6 || results === 7) {
                    $('.inside-results').html(`${score}
                    <p>You're no idiot!</p>
                    <img src="assets/dwight-idiot.jpg" alt="Dwight Schrute saying that he would never do what an idiot does">`);
                } else if (results === 4 || results === 5) {
                    $('.inside-results').html(`${score}
                    <p>Well done! Not bad at all.</p>
                    <img src="assets/not-bad.jpg" alt="Michael Scott saying not bad">`);
                } else if (results === 2 || results === 3) {
                    $('.inside-results').html(`${score}
                    <p>Could be better. Watch the show a few more dozen times and try again!</p>
                    <img src="assets/harder.gif" alt="Gabe Lewis saying that Michael is making pizza-making harder than it has to be">`);
                } else {
                    $('.inside-results').html(`${score}
                    <p>Have you even seen the show?</p>
                    <img src="assets/kevin-patience.jpg" alt="Kevin Malone saying he has very little patience for stupidity">`);
                }
            });
        };

        // once the document is ready...
        $(document).ready(function () {

            // call the getAnswers function described above
            myGame.getAnswers();

            // call the Animate on Scroll function
            AOS.init();
        });

    </script>

</body>

</html>